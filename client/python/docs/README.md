Generated Python Client Docs
============================

This sphinx build exists to allow autogeneration of Python client API docs
based on docstrings in the client module itself.

Usage
-----

Easy way:
- Ensure all protobufs files needed for the client are generated by running
  `mage buildPython` from the repository root.
- `tox -e docs` will create a valid virtual environment and use it to generate
  documentation. The generated files will be placed under `build/jekyll/*.md`.

Manual way:
- Ensure all protobufs files needed for the client are generated by running
  `mage buildPython` from the repository root.
- Create a virtual environment containing all the deps listed in `tox.ini`
  under `[testenv:docs]`.
- Run `poetry install -v` from inside `client/python` to install the client
  into the virtual enviornment.
- Run `sphinx-build -M jekyll source build`.
    - If you wish to generate to other formats, you can run
      `sphinx-build -M help` to get a full list of build targets. This may be
      useful in the future if we wish to ship documentation to pypi.

Changing templates or adding modules
------------------------------------
The templates under `source/` are the source used to generate documentation
within. Full autodoc syntax for sphinx can be found on the internet if you wish
to modify these files.

Importantly, we will only generate for the modules explicitly listed in
`source/armada_client.rst` -- this means if you add a new module in the future,
you may need to add it manually to this file or add a new file (which
will output a new markdown file at build time ) for the newly-added module.

The `sphinx-apidoc` command can be run to regenerate default skeleton rst files
inside `source/`. This should only be done if we've made significant additions
or changes to the API surface and module layout.