syntax = 'proto3';
package controlplaneevents;
option go_package = "github.com/armadaproject/armada/pkg/controlplaneevents";
option csharp_namespace = "ArmadaProject.Io.ControlPlaneEvents";

import "google/protobuf/timestamp.proto";


message Event {
  google.protobuf.Timestamp created = 1;
  oneof event {
    ExecutorSettingsUpsert executorSettingsUpsert = 2;
    ExecutorSettingsDelete executorSettingsDelete = 3;
    PreemptOnExecutor preemptOnExecutor = 4;
    CancelOnExecutor cancelOnExecutor = 5;
  }
}

message ExecutorSettingsUpsert {
  string name = 1;
  bool cordoned = 2;
  string cordonReason = 3;
  string setByUser = 4;
}

message ExecutorSettingsDelete {
  string name = 1;
}

message PreemptOnExecutor {
  string name = 1;
  // We select jobs to preempt on the executor based on the provided Select message
  oneof Select {
    ByPriorityClass priorityClasses = 2;
    ByPriorityQueue queues = 3;
  }
}

message CancelOnExecutor {
  string name = 1;
  // We select jobs on the executor to cancel based on the provided Select message
  oneof Select {
    ByPriorityClass priorityClasses = 2;
    ByPriorityQueue queues = 3;
  }
}

message ByPriorityClass {
  repeated string priorityClasses = 1;
}

message ByPriorityQueue {
  repeated string queues = 1;
}
